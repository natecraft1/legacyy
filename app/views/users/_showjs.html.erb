<script>
$(document).ready(function() {
  

  $('#year_year').val(gon.age);
  $('.intro span').html(gon.currentyr);

  if (gon.posts.length > 0) { 
    $('div.what_i_did').html(gon.posts[0].what_i_did);
    $('div.lesson').html(gon.posts[0].lesson_or_story);
  }

  findContent(gon.currentyr);
  
  function findContent(value) {  
    for (var i=0; i<gon.posts.length; i++) {
      if (gon.posts[i].year == value)
      {
        // hide the form if there is content for the selected year
        $('.new_year').hide();
        what_i_did = gon.posts[i].what_i_did;
        lesson_or_story = gon.posts[i].lesson_or_story;
        insertContent(what_i_did, lesson_or_story);
        break;
      }
      else {
        // show form if there's no match
        $('.new_year').show();
        $('.what_i_did').html('');
        $('.lesson').html('');
      }
    }
  }
  function insertContent(what, lesson) {
    $('div.lesson').html('');
    $('div.what_i_did').html('');
    $('.what_i_did').html(what);
    $('.lesson').html(lesson);
  }
  // function arrowClick(value) {
  //   $(".arrow").click(function(event) {
  //     event.preventDefault();
  //     //might need ajax call to get params
  //   });
  // }
  $(".year").click(function(event) {
    event.preventDefault();
    $('#year_year').val($(this).html());
    var val = $(this).html();
    // this is how you send data to the backend...
    // $.get('/users/' + "<%= params[:id] %>?key=" + val, function() {
    //   console.log("sent");
    // });

    console.log(val);
    // changes the sentence "this is me at..."
    $('.intro span').html(val);
    // find the post of the year that is clicked
    findContent(val);
  

    history.replaceState({}, '', "/" + gon.username + '/' + val );
      return false;
  });
});
</script>